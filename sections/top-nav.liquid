<link href="{{ 'top-nav.css' | asset_url }}" rel="stylesheet" />
<nav class="top-nav" aria-label="Main navigation">
  <div class="top-nav__inner">
    <div class="brand">{{ shop.name }}</div>
    <button class="top-nav__mobile-toggle" aria-expanded="false" aria-controls="top-nav-list">☰</button>
    <ul id="top-nav-list" class="top-nav__list">
      {% assign chosen_menu = section.settings.menu | default: settings.main_menu %}
      {% assign menu = linklists[chosen_menu] %}
      {% if menu and menu.links.size > 0 %}
        {% for link in menu.links %}
          <li class="top-nav__item">
            <a href="{{ link.url }}" class="top-nav__link" tabindex="0">{{ link.title }}</a>
            {% if link.links and link.links.size > 0 %}
              <ul class="top-nav__submenu">
                {% for child in link.links %}
                  <li><a href="{{ child.url }}">{{ child.title }}</a></li>
                {% endfor %}
              </ul>
            {% endif %}
          </li>
        {% endfor %}
      {% else %}
        <!-- Fallback static menu with hoverable subcategories -->
        {% assign fallback = 'Automotive & Motorcycle::automotive-motorcycle::Car care kits;Riding gear;Garage essentials|Home Improvement::home-improvement::Tools & safety;Lighting;Smart home|Electronics::electronics::Mobile & wearables;Audio & video;Workspace|Toys::toys::STEM kits;Outdoor play;Collectibles|Sports & Outdoors::sports-outdoors::Fitness;Hiking & camping;Cycling|Pets::pets::Dogs;Cats;Training & care|Home, Garden & Furniture::home-garden-furniture::Decor accents;Kitchen & dining;Outdoor living|Jewelry & Watches::jewelry-watches::Minimalist jewelry;Statement pieces;Watches|Bags & Shoes::bags-shoes::Sneakers;Bags;Travel gear|Clothing & Apparel::clothing-apparel::Casual basics;Activewear;Evening & formal' | split: '|' %}
        {% for entry in fallback %}
          {% assign parts = entry | split: '::' %}
          {% assign subcats = parts[2] | split: ';' %}
          <li class="top-nav__item">
            <a href="/collections/{{ parts[1] }}" class="top-nav__link">{{ parts[0] }}</a>
            <ul class="top-nav__submenu">
              {% for sub in subcats %}
                <li><a href="/collections/{{ parts[1] }}?filter={{ sub | handle }}">{{ sub }}</a></li>
              {% endfor %}
            </ul>
          </li>
        {% endfor %}
      {% endif %}

      <li class="top-nav__item top-nav__more" aria-hidden="true">
        <button class="top-nav__more-toggle" aria-expanded="false">More ▾</button>
        <ul class="top-nav__more-list" aria-label="More categories"></ul>
      </li>
    </ul>
  </div>
</nav>
<script src="{{ 'top-nav.js' | asset_url }}" defer></script>

{% schema %}
{
  "name": "Top Navigation (Custom)",
  "settings": [
    {
      "type": "link_list",
      "id": "menu",
      "label": "Main menu"
    }
  ],
  "presets": [{"name": "Top Navigation"}]
}
{% endschema %}
