<link href="{{ 'top-nav.css' | asset_url }}" rel="stylesheet" />
<nav class="top-nav" aria-label="Main navigation">
  <div class="top-nav__inner">
    <div class="brand">{{ shop.name }}</div>
    <button class="top-nav__mobile-toggle" aria-expanded="false" aria-controls="top-nav-list">☰</button>
    <ul id="top-nav-list" class="top-nav__list">
      {% assign chosen_menu = section.settings.menu | default: settings.main_menu %}
      {% assign menu = linklists[chosen_menu] %}
      {% if menu and menu.links.size > 0 %}
        {% for link in menu.links %}
          <li class="top-nav__item">
            <a href="{{ link.url }}" class="top-nav__link" tabindex="0">{{ link.title }}</a>
            {% if link.links and link.links.size > 0 %}
              <ul class="top-nav__submenu">
                {% for child in link.links %}
                  <li><a href="{{ child.url }}">{{ child.title }}</a></li>
                {% endfor %}
              </ul>
            {% endif %}
          </li>
        {% endfor %}
      {% else %}
        <li class="top-nav__item"><a href="/" class="top-nav__link">Home</a></li>
        <li class="top-nav__item"><a href="/collections/all" class="top-nav__link">Shop all</a></li>
        <li class="top-nav__item"><a href="#collections" class="top-nav__link">Categories</a></li>
        <li class="top-nav__item"><a href="/pages/support" class="top-nav__link">Support</a></li>
      {% endif %}

      <li class="top-nav__item top-nav__more" aria-hidden="true">
        <button class="top-nav__more-toggle" aria-expanded="false">More ▾</button>
        <ul class="top-nav__more-list" aria-label="More categories"></ul>
      </li>
    </ul>
  </div>
</nav>
<script src="{{ 'top-nav.js' | asset_url }}" defer></script>

{% schema %}
{
  "name": "Top Navigation (Custom)",
  "settings": [
    {
      "type": "link_list",
      "id": "menu",
      "label": "Main menu"
    }
  ],
  "presets": [{"name": "Top Navigation"}]
}
{% endschema %}
